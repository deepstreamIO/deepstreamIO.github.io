<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="DeepstreamIO RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="DeepstreamIO Atom Feed"><title data-react-helmet="true">Configuration | DeepstreamIO</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://deepstreamIO.github.io/docs/docs/server/configuration"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Configuration | DeepstreamIO"><meta data-react-helmet="true" name="description" content="The available configuration options to customize deepstream"><meta data-react-helmet="true" property="og:description" content="The available configuration options to customize deepstream"><link data-react-helmet="true" rel="icon" href="/img/eltons/elton-hive.svg"><link data-react-helmet="true" rel="canonical" href="https://deepstreamIO.github.io/docs/docs/server/configuration"><link data-react-helmet="true" rel="alternate" href="https://deepstreamIO.github.io/docs/docs/server/configuration" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://deepstreamIO.github.io/docs/docs/server/configuration" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.82963691.css">
<link rel="preload" href="/assets/js/runtime~main.e0623dcf.js" as="script">
<link rel="preload" href="/assets/js/main.fcc4c7d0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/eltons/elton-hive.svg" alt="DeepstreamIO" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/eltons/elton-hive.svg" alt="DeepstreamIO" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">DeepstreamIO</b></a><a class="navbar__item navbar__link" href="/docs/tutorials/concepts/what-is-deepstream">Tutorials</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/docs">Docs</a><a class="navbar__item navbar__link" href="/docs/guides">Guides</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/deepstreamIO" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/tutorials/concepts/what-is-deepstream">tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_TwRn" href="/docs/docs">docs</a><button aria-label="Toggle the collapsible sidebar category &#x27;docs&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/docs/docs/server/command-line-interface">server</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/server/command-line-interface">Command Line Interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/docs/server/configuration">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/server/node-api">Node API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/server/user-file">User File</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/server/valve-permissions">Valve Permissions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/docs/client-js/client">client-js</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/docs/client-http/v1">client-http</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/docs/common/constants">common</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" href="/docs/guides">guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Configuration</h1></header><p>You can make any configuration changes you need for your deepstream setup in the
<em>config.yml</em> file or in the options object passed to the deepstream constructor when using the node API.
Depending on the installation sources, the configuration can
be found in</p><ul><li>in the folder <code>conf</code> in the Node.js module directory if you installed with
<code>npm</code>, or</li><li>in the folder <code>conf</code> after unpacking the standalone server binary.</li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The default server configuration can be found on the <a href="https://github.com/deepstreamIO/deepstream.io/blob/master/src/default-options.ts" target="_blank" rel="noopener noreferrer">source code here</a></p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="macros">Macros<a class="hash-link" href="#macros" title="Direct link to heading">â€‹</a></h2><p>Before we start diving into config, lets look at the current macros we have in order
to make our lives a little bit easier:</p><ul><li><code>${ENVIRONMENT_VARIABLE}</code></li></ul><p>This is the usual replace environment variable into my config before running, useful
in around 100% of deployment usecases.</p><ul><li><code>file(relative/path)</code></li></ul><p>This allows the server to binary to point to the file relative to your config file. This
is pretty useful for global and binary installs.</p><ul><li><code>fileLoad(relative/path)</code></li></ul><p>This is more of a utility for us plugin developers, it automatically loads up the data
and parses it (if json or yml). This means node developers can now just deal with writing
everything as parsed data and leave loading / parsing and errors to deepstream startup.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="general-configuration">General Configuration<a class="hash-link" href="#general-configuration" title="Direct link to heading">â€‹</a></h2><p>In this section you can change general settings for each server in a cluster.</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># general configuration with default values</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">serverName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> UUID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">showLogo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">dependencyInitializationTimeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">exitOnFatalError</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">logLevel</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> INFO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#libDir: ../lib</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="servername">serverName<a class="hash-link" href="#servername" title="Direct link to heading">â€‹</a></h3><p>Every server in a cluster of servers needs a unique name. You can add your own or set it to <code>UUID</code> to let deepstream auto-generate a unique ID.</p><p><em>Default</em>: <code>UUID</code></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="showlogo">showLogo<a class="hash-link" href="#showlogo" title="Direct link to heading">â€‹</a></h3><p>When starting, a server can show the deepstream logo. This setting is best left enabled.</p><p><em>Default</em>: <code>true</code></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="loglevel">logLevel<a class="hash-link" href="#loglevel" title="Direct link to heading">â€‹</a></h3><p>The logLevel to use across the application. Sets at what level and above the server should log messages. Valid levels are <code>DEBUG</code>, <code>INFO</code>,
<code>WARN</code>, <code>ERROR</code>, and <code>OFF</code>.</p><p><em>Default</em>: INFO</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="dependencyinitializationtimeout">dependencyInitializationTimeout<a class="hash-link" href="#dependencyinitializationtimeout" title="Direct link to heading">â€‹</a></h3><p>Sets how long deepstream will wait for dependencies to initialize.</p><p><em>Default</em>:<code>2000</code></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="exitonfatalerror">exitOnFatalError<a class="hash-link" href="#exitonfatalerror" title="Direct link to heading">â€‹</a></h3><p>Exit if a fatal error occurs</p><p><em>Default</em>: false</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="libdir">libDir<a class="hash-link" href="#libdir" title="Direct link to heading">â€‹</a></h3><p>The directory where all the plugins reside, this is used in standalone binaries</p><p><em>Default</em>: None, it assumes all plugins are installed via npm</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="features-configuration">Features configuration<a class="hash-link" href="#features-configuration" title="Direct link to heading">â€‹</a></h2><p>This disables specific feature in deepstream, which is a more performant way than disabling via permissions and is also how telemetry figures out what features are enabled.</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">enabledFeatures</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">record</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">event</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">rpc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">presence</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="rpc-configuration">RPC Configuration<a class="hash-link" href="#rpc-configuration" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="acktimeout">ackTimeout<a class="hash-link" href="#acktimeout" title="Direct link to heading">â€‹</a></h3><p>Sets how long deepstream will wait for a RPC provider to acknowledge receipt of a request.</p><p><em>Default</em>:<code>1000</code></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="responsetimeout">responseTimeout<a class="hash-link" href="#responsetimeout" title="Direct link to heading">â€‹</a></h3><p>Sets how long deepstream will wait for RPCs to complete before sending a response timeout error.</p><p><em>Default</em>:<code>10000</code></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="providerequestorname">provideRequestorName<a class="hash-link" href="#providerequestorname" title="Direct link to heading">â€‹</a></h3><p>Send requestorName by default.</p><p><em>Default</em>:<code>true</code></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="providerequestordata">provideRequestorData<a class="hash-link" href="#providerequestordata" title="Direct link to heading">â€‹</a></h3><p>Send requestorData by default.</p><p><em>Default</em>:<code>true</code></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="record-configuration">Record Configuration<a class="hash-link" href="#record-configuration" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="cacheretrievaltimeout">cacheRetrievalTimeout<a class="hash-link" href="#cacheretrievaltimeout" title="Direct link to heading">â€‹</a></h3><p>Sets how long deepstream will wait when retrieving values from the cache.</p><p><em>Default</em>:<code>1000</code></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="storageretrievaltimeout">storageRetrievalTimeout<a class="hash-link" href="#storageretrievaltimeout" title="Direct link to heading">â€‹</a></h3><p>Sets how long deepstream will wait when retrieving values from the database.</p><p><em>Default</em>:<code>2000</code></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="storageexclusionprefixes">storageExclusionPrefixes<a class="hash-link" href="#storageexclusionprefixes" title="Direct link to heading">â€‹</a></h3><p>A list of prefixes that, when a record starts with one of the prefixes the
records data won&#x27;t be stored in the db</p><p><em>Default</em>: <code>[]</code></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="storagehotpathprefixes">storageHotPathPrefixes<a class="hash-link" href="#storagehotpathprefixes" title="Direct link to heading">â€‹</a></h3><p>A list of prefixes that designate a record for direct writes to storage.
When a correctly permissioned matching record is updated via <code>setData()</code>, it will be written
directly to the cache and storage without a record transition. This can be up to twice as fast as
updating a normal record using <code>setData()</code></p><p><em>Default</em>: <code>[]</code></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="listening">Listening<a class="hash-link" href="#listening" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="shuffleproviders">shuffleProviders<a class="hash-link" href="#shuffleproviders" title="Direct link to heading">â€‹</a></h3><p>Try finding a provider randomly rather than by the order they subscribed to.</p><p><em>Default</em>: true</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="responsetimeout-1">responseTimeout<a class="hash-link" href="#responsetimeout-1" title="Direct link to heading">â€‹</a></h3><p>The amount of time to wait for a provider to acknowledge or reject a listen request</p><p><em>Default</em>: 500</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="rematchinterval">rematchInterval<a class="hash-link" href="#rematchinterval" title="Direct link to heading">â€‹</a></h3><p>The amount of time before trying to reattempt finding matches for subscriptions. This
is not a cheap operation so it&#x27;s recommended to raise keep this at minutes rather then
second intervals if you are experiencing heavy loads</p><p><em>Default</em>: 30000</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="matchcooldown">matchCooldown<a class="hash-link" href="#matchcooldown" title="Direct link to heading">â€‹</a></h3><p>The amount of time a server will refuse to retry finding a subscriber after a previously
failed attempt. This is used to avoid servers constantly trying to find a match without a
cooldown period</p><p><em>Default</em>: 10000</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="connection-endpoint-configuration">Connection Endpoint Configuration<a class="hash-link" href="#connection-endpoint-configuration" title="Direct link to heading">â€‹</a></h2><p>Deepstream (v5 and later) runs all websocket / HTTP services in one server to which they hook to provide their own functionality. This means you can run all the services at the same time on the same port if you want (for example text, binary and JSON). The idea is that <em>EVERYTHING</em> (minus MQTT) runs on port 6020, which makes deployments much easier.</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">httpServer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># url path for http health-checks, GET requests to this path will return 200 if deepstream is alive</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">healthCheckPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /health</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># -- CORS --</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># if disabled, only requests with an &#x27;Origin&#x27; header matching one specified under &#x27;origins&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># below will be permitted and the &#x27;Access-Control-Allow-Credentials&#x27; response header will be</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># enabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">allowAllOrigins</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># a list of allowed origins</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">origins</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https://example.com&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># maximum allowed size of a POST request body, in bytes, defaults to 1 MB</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">maxMessageSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1048576</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Headers to copy over from websocket</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ssl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fileLoad(/path/to/sslKey)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">cert</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fileLoad(/path/to/sslCert)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ca</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fileLoad(/path/to/caAuth)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>OR</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">httpServer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> uws</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># url path for http health-checks, GET requests to this path will return 200 if deepstream is alive</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">healthCheckPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /health</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># -- CORS --</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># if disabled, only requests with an &#x27;Origin&#x27; header matching one specified under &#x27;origins&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># below will be permitted and the &#x27;Access-Control-Allow-Credentials&#x27; response header will be</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># enabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">allowAllOrigins</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># a list of allowed origins</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">origins</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https://example.com&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># maximum allowed size of a POST request body, in bytes, defaults to 1 MB</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">maxMessageSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1048576</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Headers to copy over from websocket</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Options required to create an ssl app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ssl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> file(ssl/key.pem)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">cert</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> file(ssl/cert.pem)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">##  dhParams: ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">##  passphrase: ...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The server can be configured with custom connection endpoints. You can supply as many as you want, each as any individual list entry below the <code>connectionEndpoints</code> key:</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Connection Endpoint Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">connectionEndpoints</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ws</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">binary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># url path websocket connections connect to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">urlPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /deepstream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># the amount of milliseconds between each ping/heartbeat message</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">heartbeatInterval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># the amount of milliseconds that writes to sockets are buffered</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">outgoingBufferTimeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># the maximum amount of bytes to buffer before flushing, stops the client from large enough packages</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># to block its responsiveness</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">maxBufferByteSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Security</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># should the server log invalid auth data, defaults to false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">logInvalidAuthData</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># amount of time a connection can remain open while not being logged in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">unauthenticatedClientTimeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">180000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># invalid login attempts before the connection is cut</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">maxAuthAttempts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># maximum allowed size of an individual message in bytes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">maxMessageSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1048576</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ws</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># url path websocket connections connect to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">urlPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /deepstream</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># the amount of milliseconds between each ping/heartbeat message</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">heartbeatInterval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># the amount of milliseconds that writes to sockets are buffered</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">outgoingBufferTimeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># the maximum amount of bytes to buffer before flushing, stops the client from large enough packages</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># to block its responsiveness</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">maxBufferByteSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Security</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># should the server log invalid auth data, defaults to false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">logInvalidAuthData</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># amount of time a connection can remain open while not being logged in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">unauthenticatedClientTimeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">180000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># invalid login attempts before the connection is cut</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">maxAuthAttempts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># maximum allowed size of an individual message in bytes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">maxMessageSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1048576</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ws</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># url path websocket connections connect to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">urlPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /deepstream</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># the amount of milliseconds between each ping/heartbeat message</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">heartbeatInterval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># the amount of milliseconds that writes to sockets are buffered</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">outgoingBufferTimeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># the maximum amount of bytes to buffer before flushing, stops the client from large enough packages</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># to block its responsiveness</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">maxBufferByteSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Security</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># should the server log invalid auth data, defaults to false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">logInvalidAuthData</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># amount of time a connection can remain open while not being logged in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">unauthenticatedClientTimeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">180000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># invalid login attempts before the connection is cut</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">maxAuthAttempts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># maximum allowed size of an individual message in bytes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">maxMessageSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1048576</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="websockets">Websockets<a class="hash-link" href="#websockets" title="Direct link to heading">â€‹</a></h3><p>The websocket endpoints share the following options:</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="urlpath">urlPath<a class="hash-link" href="#urlpath" title="Direct link to heading">â€‹</a></h4><p>Sets which URL path Websocket connections should connect to.</p><p><em>Default</em>: <code>/deepstream</code></p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="heartbeatinterval">heartbeatInterval<a class="hash-link" href="#heartbeatinterval" title="Direct link to heading">â€‹</a></h4><p>The number of milliseconds between each ping/heartbeat message.</p><p><em>Default</em>: <code>30000</code></p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="unauthenticatedclienttimeout">unauthenticatedClientTimeout<a class="hash-link" href="#unauthenticatedclienttimeout" title="Direct link to heading">â€‹</a></h4><p>The amount of time a connection can remain open while not being logged in.</p><p><em>Default</em>: <code>180000</code></p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="maxauthattempts">maxAuthAttempts<a class="hash-link" href="#maxauthattempts" title="Direct link to heading">â€‹</a></h4><p>Invalid login attempts before the connection is cut.</p><p><em>Default</em>: <code>3</code></p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="loginvalidauthdata">logInvalidAuthData<a class="hash-link" href="#loginvalidauthdata" title="Direct link to heading">â€‹</a></h4><p>Controls whether logs should contain the cleartext usernames and passwords of invalid login
attempts.</p><p><em>Default</em>: false</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="maxmessagesize">maxMessageSize<a class="hash-link" href="#maxmessagesize" title="Direct link to heading">â€‹</a></h4><p>Sets the maximum message size allowed to be sent to the server (in bytes).</p><p><em>Default</em>: <code>1048576</code></p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="outgoingbuffertimeout">outgoingBufferTimeout<a class="hash-link" href="#outgoingbuffertimeout" title="Direct link to heading">â€‹</a></h4><p>The amount of milliseconds that secondary writes to sockets are buffered. This means
writes that are not realtime critical, which currently are either ACKs or
non critical ERROR messages.</p><p><em>Default</em>: <code>0</code></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="http">http<a class="hash-link" href="#http" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># allow &#x27;authData&#x27; parameter in POST requests, if disabled only token and OPEN auth is</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># possible</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">allowAuthData</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># enable the authentication endpoint for requesting userData and/or tokens</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># note: a custom authentication handler is required for token generation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">enableAuthEndpoint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># path for authentication requests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">authPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /api/auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># path for POST requests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">postPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># path for GET requests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">getPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># should the server log invalid auth data, defaults to false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">logInvalidAuthData</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># http request timeout in milliseconds, defaults to 20000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requestTimeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20000</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="mqtt">mqtt<a class="hash-link" href="#mqtt" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mqtt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># port for the mqtt server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1883</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># host for the mqtt server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 0.0.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># timeout for idle devices</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">idleTimeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60000</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="custom-plugin-configuration">Custom Plugin Configuration<a class="hash-link" href="#custom-plugin-configuration" title="Direct link to heading">â€‹</a></h2><p>You can extend deepstream with plugins for connectors to other services, these
are for logging, storage engines, caching layers, and message systems. To enable
a plugin, uncomment the relevant category key underneath the <code>plugins</code> key. Each
plugin type has a path or name, and a set of options.</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Plugin example using redis</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">plugins</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">myCustomPlugin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">custom</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> localhost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5672</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="path">path<a class="hash-link" href="#path" title="Direct link to heading">â€‹</a></h3><p>Set a path to a JavaScript file, node module or a folder with an <em>index.js</em> file which exports a constructor.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="name">name<a class="hash-link" href="#name" title="Direct link to heading">â€‹</a></h3><p>If you are using any of the official deepstream connectors, add the name of what the plugin connects to here, for example <code>redis</code>.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p> You can set <code>path</code> <strong>or</strong> <code>name</code>, but not both.</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="options">options<a class="hash-link" href="#options" title="Direct link to heading">â€‹</a></h3><p>Under this key, add sub key/value pairs to set the configuration options that are passed to the plugin. Each plugin should mention what configuration options you can set.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="logger">Logger<a class="hash-link" href="#logger" title="Direct link to heading">â€‹</a></h2><p>deepstream uses by default a logger which prints out to <em>stdout</em> (errors and warnings to <em>stderr</em>). You can set these options for the default logger by using the same configuration style for the plugins:</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">logger</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">colors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="colors">colors<a class="hash-link" href="#colors" title="Direct link to heading">â€‹</a></h3><p>Sets whether the server&#x27;s logs should output in color. This will look great in a console, but will
leave color markers in log files if you redirect the output into a file.</p><p><em>Default</em>: <code>true</code></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="authentication">Authentication<a class="hash-link" href="#authentication" title="Direct link to heading">â€‹</a></h2><p>In this section you can configure the authentication types the server uses.</p><p>You set the authentication type as a subkey in the <code>auth</code> key. The available
authentication options are <code>none</code>, <code>file</code>, <code>storage</code> and <code>http</code>, each of them having
different <code>options</code> which are described in the tutorials on <a href="/docs/tutorials/core/auth/auth-introduction">Auth
None</a>, <a href="/docs/tutorials/core/auth/file">file-based
authentication</a>, <a href="/docs/tutorials/core/auth/storage">storage-based
authentication</a>, <a href="/docs/tutorials/core/auth/http-webhook">HTTP
authentication</a>, and <a href="/docs/tutorials/core/auth/jwt-auth">JWT authentication</a> respectively.</p><p>You can set multiple authentication types simultaneously and the incoming connection will be validated against each of them until one succeeds or all fail. Authentication strategies will be queried in the same order they are declared on the configuration file.</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#Authentication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">auth</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> none</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><em>Default</em>: <code>none</code></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="permissioning">Permissioning<a class="hash-link" href="#permissioning" title="Direct link to heading">â€‹</a></h2><p>In this section you can configure the
<a href="/docs/tutorials/core/permission/valve-introduction">permissioning</a>. The key used for this
section is <code>permission</code> and you can create your own custom permission handler or
use a configuration file. To use the former method, select the option
<code>type: none</code> and override the <code>permissionHandler</code> with the aid of the <a href="/docs/docs/server/node-api">NodeJS
server API</a>. To use the latter method, set <code>type: config</code> and modify the <code>option</code> values below.</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Permissioning example with default values for config-based permissioning</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">permission</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./permissions.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">maxRuleIterations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">cacheEvacuationInterval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60000</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="path-1">path<a class="hash-link" href="#path-1" title="Direct link to heading">â€‹</a></h3><p>Set the path to the file that declares permissions. This option is <strong>mandatory</strong>
with <code>type: config</code>. The file can be in JSON, JavaScript, or YAML format. By
default, deepstream ships with a <code>permissions.yml</code> permitting every action.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="maxruleiterations">maxRuleIterations<a class="hash-link" href="#maxruleiterations" title="Direct link to heading">â€‹</a></h3><p>The deepstream permissions model allows for some complex nested actions and queries. To prevent a performance hit you can limit the nesting level with this option.</p><p><em>Default</em>: <code>3</code></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="cacheevacuationinterval">cacheEvacuationInterval<a class="hash-link" href="#cacheevacuationinterval" title="Direct link to heading">â€‹</a></h3><p>The results of permission checks are cached to improve performance. Use this setting to change the time interval (in milliseconds) that the cache is regenerated.</p><p><em>Default</em>: <code>60000</code></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="storage-and-cache">Storage and Cache<a class="hash-link" href="#storage-and-cache" title="Direct link to heading">â€‹</a></h2><p>Storage and Cache plugins can be configured as follows, please look at <a href="/docs/tutorials/plugins/database/postgres">storage</a> and
<a href="/docs/tutorials/plugins/cache/redis">cache</a> connectors for in depth tutorials how to configure them.</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">cache</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> localhost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6379</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">database</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysecretpassword</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;localhost&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5432</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><em>Default</em>: in memory cache and no storage.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="monitoring">Monitoring<a class="hash-link" href="#monitoring" title="Direct link to heading">â€‹</a></h2><p>Set monitoring options.</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">monitoring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> none</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># # Allows monitoring stats to be requested via HTTP, useful for polling agents</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># # such as LogStash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># type: http</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># options:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#   url: /monitoring</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#   allowOpenPermissions: false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#   headerKey: deepstream-password2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#   headerValue: deepstream-secret</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># # Logs monitoring stats, useful for kibana where you can visualize meta data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># type: log</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># options:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#   logInterval: 30000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#   monitoringKey: DEEPSTREAM_MONITORING</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><em>Default</em>: <code>none</code></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="clusternode">Clusternode<a class="hash-link" href="#clusternode" title="Direct link to heading">â€‹</a></h2><p>Configuration options for deepstream clusters. Deepstream comes with two possible cluster modes: no cluster and <a href="/docs/tutorials/plugins/clusternode/vertical">vertical cluster</a> in order to use all CPU cores.
See <a href="/docs/tutorials/plugins/clusternode/redis">here</a> in order to use redis as cluster connector in multiple machine deployments.</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">clusterNode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#name: vertical</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><em>Default</em>: <code>none</code></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="lock-registry">Lock registry<a class="hash-link" href="#lock-registry" title="Direct link to heading">â€‹</a></h3><p>The lock registry is responsible for maintaing a single source of truth within the cluster, used mainly for issuing cluster wide locks when an operation that stretches over multiple nodes are required. For example, distributed listening requires a leader to drive the nodes in sequence, so issuing a lock prevents multiple nodes from assuming the lead.</p><p>Check the default server configuration for details, <a href="https://github.com/deepstreamIO/deepstream.io/blob/master/src/default-options.ts" target="_blank" rel="noopener noreferrer">source code here</a></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="cluster-registry">Cluster registry<a class="hash-link" href="#cluster-registry" title="Direct link to heading">â€‹</a></h3><p> This class maintains a list of all nodes that are currently present within the cluster. It provides status messages on a predefined interval and keeps track of incoming status messages.</p><p>Check the default server configuration for details, <a href="https://github.com/deepstreamIO/deepstream.io/blob/master/src/default-options.ts" target="_blank" rel="noopener noreferrer">source code here</a></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="cluster-states">Cluster States<a class="hash-link" href="#cluster-states" title="Direct link to heading">â€‹</a></h3><p> This class provides a generic mechanism that allows to maintain a distributed state amongst the nodes of a cluster. The state is an array of unique strings in arbitrary order. Whenever a string is added by any node within the cluster for the first time,
an &#x27;add&#x27; event is emitted. Whenever its removed by the last node within the cluster, a &#x27;remove&#x27; event is emitted.</p><p>Check the default server configuration for details, <a href="https://github.com/deepstreamIO/deepstream.io/blob/master/src/default-options.ts" target="_blank" rel="noopener noreferrer">source code here</a></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="custom-plugins">Custom Plugins<a class="hash-link" href="#custom-plugins" title="Direct link to heading">â€‹</a></h2><p>Deepstream can be extended with any plugin via the <a href="/docs/tutorials/custom-plugins/an-overview">plugin API</a>. Custom plugins can be declared as follows:</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">plugins</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">custom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;...&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/deepstreamIO/deepstreamIO.github.io/docs/10-docs/10-server/20-configuration.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/docs/server/command-line-interface"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Command Line Interface</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/docs/server/node-api"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Node API</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#macros" class="table-of-contents__link toc-highlight">Macros</a></li><li><a href="#general-configuration" class="table-of-contents__link toc-highlight">General Configuration</a><ul><li><a href="#servername" class="table-of-contents__link toc-highlight">serverName</a></li><li><a href="#showlogo" class="table-of-contents__link toc-highlight">showLogo</a></li><li><a href="#loglevel" class="table-of-contents__link toc-highlight">logLevel</a></li><li><a href="#dependencyinitializationtimeout" class="table-of-contents__link toc-highlight">dependencyInitializationTimeout</a></li><li><a href="#exitonfatalerror" class="table-of-contents__link toc-highlight">exitOnFatalError</a></li><li><a href="#libdir" class="table-of-contents__link toc-highlight">libDir</a></li></ul></li><li><a href="#features-configuration" class="table-of-contents__link toc-highlight">Features configuration</a></li><li><a href="#rpc-configuration" class="table-of-contents__link toc-highlight">RPC Configuration</a><ul><li><a href="#acktimeout" class="table-of-contents__link toc-highlight">ackTimeout</a></li><li><a href="#responsetimeout" class="table-of-contents__link toc-highlight">responseTimeout</a></li><li><a href="#providerequestorname" class="table-of-contents__link toc-highlight">provideRequestorName</a></li><li><a href="#providerequestordata" class="table-of-contents__link toc-highlight">provideRequestorData</a></li></ul></li><li><a href="#record-configuration" class="table-of-contents__link toc-highlight">Record Configuration</a><ul><li><a href="#cacheretrievaltimeout" class="table-of-contents__link toc-highlight">cacheRetrievalTimeout</a></li><li><a href="#storageretrievaltimeout" class="table-of-contents__link toc-highlight">storageRetrievalTimeout</a></li><li><a href="#storageexclusionprefixes" class="table-of-contents__link toc-highlight">storageExclusionPrefixes</a></li><li><a href="#storagehotpathprefixes" class="table-of-contents__link toc-highlight">storageHotPathPrefixes</a></li></ul></li><li><a href="#listening" class="table-of-contents__link toc-highlight">Listening</a><ul><li><a href="#shuffleproviders" class="table-of-contents__link toc-highlight">shuffleProviders</a></li><li><a href="#responsetimeout-1" class="table-of-contents__link toc-highlight">responseTimeout</a></li><li><a href="#rematchinterval" class="table-of-contents__link toc-highlight">rematchInterval</a></li><li><a href="#matchcooldown" class="table-of-contents__link toc-highlight">matchCooldown</a></li></ul></li><li><a href="#connection-endpoint-configuration" class="table-of-contents__link toc-highlight">Connection Endpoint Configuration</a><ul><li><a href="#websockets" class="table-of-contents__link toc-highlight">Websockets</a></li><li><a href="#http" class="table-of-contents__link toc-highlight">http</a></li><li><a href="#mqtt" class="table-of-contents__link toc-highlight">mqtt</a></li></ul></li><li><a href="#custom-plugin-configuration" class="table-of-contents__link toc-highlight">Custom Plugin Configuration</a><ul><li><a href="#path" class="table-of-contents__link toc-highlight">path</a></li><li><a href="#name" class="table-of-contents__link toc-highlight">name</a></li><li><a href="#options" class="table-of-contents__link toc-highlight">options</a></li></ul></li><li><a href="#logger" class="table-of-contents__link toc-highlight">Logger</a><ul><li><a href="#colors" class="table-of-contents__link toc-highlight">colors</a></li></ul></li><li><a href="#authentication" class="table-of-contents__link toc-highlight">Authentication</a></li><li><a href="#permissioning" class="table-of-contents__link toc-highlight">Permissioning</a><ul><li><a href="#path-1" class="table-of-contents__link toc-highlight">path</a></li><li><a href="#maxruleiterations" class="table-of-contents__link toc-highlight">maxRuleIterations</a></li><li><a href="#cacheevacuationinterval" class="table-of-contents__link toc-highlight">cacheEvacuationInterval</a></li></ul></li><li><a href="#storage-and-cache" class="table-of-contents__link toc-highlight">Storage and Cache</a></li><li><a href="#monitoring" class="table-of-contents__link toc-highlight">Monitoring</a></li><li><a href="#clusternode" class="table-of-contents__link toc-highlight">Clusternode</a><ul><li><a href="#lock-registry" class="table-of-contents__link toc-highlight">Lock registry</a></li><li><a href="#cluster-registry" class="table-of-contents__link toc-highlight">Cluster registry</a></li><li><a href="#cluster-states" class="table-of-contents__link toc-highlight">Cluster States</a></li></ul></li><li><a href="#custom-plugins" class="table-of-contents__link toc-highlight">Custom Plugins</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Content</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/install/linux">Install</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/concepts/what-is-deepstream">Tutorials</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/docs">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/deepstreamIO/deepstreamIO.github.io/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/deepstreamIO/deepstream.io/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Server changelog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/deepstreamIO/deepstream.io-client-js/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Client changelog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 deepstreamHub GmbH and contributors</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e0623dcf.js"></script>
<script src="/assets/js/main.fcc4c7d0.js"></script>
</body>
</html>