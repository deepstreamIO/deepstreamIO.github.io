"use strict";(self.webpackChunkdeepstreamio_github_io=self.webpackChunkdeepstreamio_github_io||[]).push([[0],{1269:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/complex-react-example-dceda413379207368942f7aeed77f69d.gif"},1329:(e,t,a)=>{a.d(t,{A:()=>n});const n="data:image/png;base64,dmVyc2lvbiBodHRwczovL2dpdC1sZnMuZ2l0aHViLmNvbS9zcGVjL3YxCm9pZCBzaGEyNTY6Yjc3NWQ4NzYzNmMxZTBlZDkxZTAyNDk1N2JiZGEwZjg3OTc2YTcxZWYzODk1OTc4YTUyN2FjZDEwMTU5ZjBmMwpzaXplIDIzNTgwCg=="},4501:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/basic-react-input-216c976016785ddcd5c52952868c06b2.gif"},5379:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var n=a(8168),r=(a(6540),a(5680));const o={title:"React"},s=void 0,i={unversionedId:"tutorials/integrations/frontend/react",id:"tutorials/integrations/frontend/react",title:"React",description:"This tutorial has not been updated",source:"@site/docs/00-tutorials/50-integrations/10-frontend/10-react.md",sourceDirName:"00-tutorials/50-integrations/10-frontend",slug:"/tutorials/integrations/frontend/react",permalink:"/docs/tutorials/integrations/frontend/react",editUrl:"https://github.com/deepstreamIO/deepstreamIO.github.io/docs/00-tutorials/50-integrations/10-frontend/10-react.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{title:"React"},sidebar:"tutorialSidebar",previous:{title:"Listening in deepstream",permalink:"/docs/tutorials/core/listening/index"},next:{title:"VueJS",permalink:"/docs/tutorials/integrations/frontend/vuejs"}},l=[{value:"Video Tutorial",id:"video-tutorial",children:[],level:2},{value:"How to use deepstream-react",id:"how-to-use-deepstream-react",children:[{value:"What about state that I don&#39;t want to be synced?",id:"what-about-state-that-i-dont-want-to-be-synced",children:[],level:3},{value:"How about a more complex example?",id:"how-about-a-more-complex-example",children:[],level:3},{value:"Prefer to use deepstream directly?",id:"prefer-to-use-deepstream-directly",children:[],level:3}],level:2}],c={toc:l},p="wrapper";function d(e){let{components:t,...o}=e;return(0,r.yg)(p,(0,n.A)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("p",{parentName:"div"},"This tutorial has not been updated"))),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"deepstream-react",src:a(1329).A})),(0,r.yg)("p",null,"deepstream and react share the same belief: apps are best composed from reusable components, driven by state. What deepstream brings to react is the ability to store this state and sync it across connected clients."),(0,r.yg)("p",null,"To make this easier, we've developed ",(0,r.yg)("strong",{parentName:"p"},"deepstream-react")," - a mixin that let's you add realtime sync to any component with just a single line of code."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"mixins: [DeepstreamReact]\n")),(0,r.yg)("h2",{id:"video-tutorial"},"Video Tutorial"),(0,r.yg)("iframe",{width:"640",height:"480",src:"https://www.youtube.com/embed/Bg0nyf02jkw?rel=0&showinfo=0",frameborder:"0",allowfullscreen:!0}),(0,r.yg)("h2",{id:"how-to-use-deepstream-react"},"How to use deepstream-react"),(0,r.yg)("p",null,"You can get deepstream-react from NPM or bower as ",(0,r.yg)("inlineCode",{parentName:"p"},"deepstream.io-tools-react")," or ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/deepstreamIO/deepstream.io-tools-react"},"browse the source on Github"),"."),(0,r.yg)("p",null,'deepstream has a concept called "records". A record is a bit of JSON data that can be observed and manipulated by clients and that\'s stored and synced by the deepstream server.'),(0,r.yg)("p",null,"deepstream-react binds a deepstream record to a react component's state. Here's what that looks like:"),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"basic input with deepstream-react",src:a(4501).A})),(0,r.yg)("p",null,"Let's replicate the example above. First, you need a deepstream server running on port 6020. If you haven't used deepstream yet, quickly head over to the ",(0,r.yg)("a",{parentName:"p",href:"../../getting-started/javascript"},"getting started tutorial"),"...don't worry, I'll wait."),(0,r.yg)("p",null,"Once your server is running, it's time to create our react-app. Let's start by installing the deepstream javascript client and deepstream-react"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"npm install @deepstream/client deepstream.io-tools-react --save\n")),(0,r.yg)("p",null,"Next: connect to the server, log in and register the client instance with deepstream-react. Sounds tougher than it is:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"const { DeepstreamClient } = require('@deepstream/client')\nconst DeepstreamMixin = require('deepstream.io-tools-react')\n\nconst client = new DeepstreamClient('localhost:6020').login({}, () => {\n  //ReactDOM.render call will go in here\n})\nDeepstreamMixin.setDeepstreamClient(client)\n")),(0,r.yg)("p",null,"Every deepstream record is identified by a unique name. To tell your component which record it should use, you need to specify a ",(0,r.yg)("inlineCode",{parentName:"p"},"dsRecord")," property."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-jsx"},"ReactDOM.render(\n  <SyncedInput dsRecord=\"some-input\" />,\n  document.getElementById('example')\n)\n")),(0,r.yg)("p",null,"And that's it. Just write your react-components as usual, all changes will be persisted and synced via deepstream."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-jsx"},"const SyncedInput = React.createClass({\n  mixins: [DeepstreamMixin],\n  setValue: function(e) {\n    this.setState({value: e.target.value})\n  },\n  render: function() {\n    return (\n      <input value={this.state.value} onChange={this.setValue} />\n    )\n  }\n})\n")),(0,r.yg)("p",null,"You can find also the code for this example on ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/deepstreamIO/ds-tutorial-react/tree/master/synced-input"},"Github")),(0,r.yg)("h3",{id:"what-about-state-that-i-dont-want-to-be-synced"},"What about state that I don't want to be synced?"),(0,r.yg)("p",null,"Quite often your component state contains data that you don't want to be stored or synced, e.g. temporary values from an input field that need to be validated first or composite values, e.g. ",(0,r.yg)("inlineCode",{parentName:"p"},"fullName")," that are composed from a first and lastname entry."),(0,r.yg)("p",null,"For those values, deepstream-react supports a ",(0,r.yg)("inlineCode",{parentName:"p"},"local")," namespace. Just store anything you want to be excluded under it."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"this.setState({\n    importantData: 'this will be synced',\n    local: {\n        temporaryData: 'this will be excluded'\n    }\n});\n")),(0,r.yg)("h3",{id:"how-about-a-more-complex-example"},"How about a more complex example?"),(0,r.yg)("p",null,"Granted, a single input doesn't constitute an app - and it's often easier to see things being used in context. So ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/deepstreamIO/ds-tutorial-react/tree/master/todo-list"},"here's a take on react's classic todo-app"),", using ",(0,r.yg)("em",{parentName:"p"},"deepstream-react"),"."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"todo list example with deepstream-react",src:a(1269).A})),(0,r.yg)("h3",{id:"prefer-to-use-deepstream-directly"},"Prefer to use deepstream directly?"),(0,r.yg)("p",null,"No problem, raw deepstream works just as well with react. You can find an ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/deepstreamIO/ds-demo-simple-app-react"},"example app that demonstrates that here"),":"),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Simple App using React",src:a(9177).A})))}d.isMDXComponent=!0},5680:(e,t,a)=>{a.d(t,{xA:()=>p,yg:()=>g});var n=a(6540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(a),u=r,g=d["".concat(l,".").concat(u)]||d[u]||m[u]||o;return a?n.createElement(g,s(s({ref:t},p),{},{components:a})):n.createElement(g,s({ref:t},p))}));function g(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,s=new Array(o);s[0]=u;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[d]="string"==typeof e?e:r,s[1]=i;for(var c=2;c<o;c++)s[c]=a[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},9177:(e,t,a)=>{a.d(t,{A:()=>n});const n="data:image/png;base64,dmVyc2lvbiBodHRwczovL2dpdC1sZnMuZ2l0aHViLmNvbS9zcGVjL3YxCm9pZCBzaGEyNTY6ZjllNDYyZDE1OTY4OTNmMWY2ODVjZTNlNmZhYjcwNWM4Nzk0MjQwZThlNGY1MTVkODE1NGVmNDE5OGE3OWMxNApzaXplIDE5OTQzCg=="}}]);