"use strict";(self.webpackChunkdeepstreamio_github_io=self.webpackChunkdeepstreamio_github_io||[]).push([[7867],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return f}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,p=a(e,["components","mdxType","originalType","parentName"]),d=u(n),f=o,h=d["".concat(l,".").concat(f)]||d[f]||c[f]||i;return n?r.createElement(h,s(s({ref:t},p),{},{components:n})):r.createElement(h,s({ref:t},p))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,s=new Array(i);s[0]=d;var a={};for(var l in t)hasOwnProperty.call(t,l)&&(a[l]=t[l]);a.originalType=e,a.mdxType="string"==typeof e?e:o,s[1]=a;for(var u=2;u<i;u++)s[u]=n[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6052:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return u},metadata:function(){return p},toc:function(){return c},default:function(){return f}});var r=n(7462),o=n(3366),i=(n(7294),n(3905)),s=n(6125),a=["components"],l={title:"UWS HTTP"},u=void 0,p={unversionedId:"tutorials/plugins/http-service/uwebsockets",id:"tutorials/plugins/http-service/uwebsockets",title:"UWS HTTP",description:"UWS is enabled throughout all endpoints by setting the httpServer type to uws.",source:"@site/docs/00-tutorials/60-plugins/39-http-service/uwebsockets.mdx",sourceDirName:"00-tutorials/60-plugins/39-http-service",slug:"/tutorials/plugins/http-service/uwebsockets",permalink:"/docs/tutorials/plugins/http-service/uwebsockets",editUrl:"https://github.com/deepstreamIO/deepstreamIO.github.io/docs/00-tutorials/60-plugins/39-http-service/uwebsockets.mdx",tags:[],version:"current",frontMatter:{title:"UWS HTTP"},sidebar:"tutorialSidebar",previous:{title:"Node HTTP",permalink:"/docs/tutorials/plugins/http-service/node"},next:{title:"HTTP Endpoint",permalink:"/docs/tutorials/plugins/connection-endpoint/http"}},c=[{value:"How to configure:",id:"how-to-configure",children:[],level:3}],d={toc:c};function f(e){var t=e.components,n=(0,o.Z)(e,a);return(0,i.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"UWS is enabled throughout all endpoints by setting the httpServer type to uws."),(0,i.kt)("p",null,"Important:"),(0,i.kt)("p",null,"UWS does not work on alpine images and returns C++ error traces on failure. If you run into\na bug please try it out with the default http server to see if it can be reproduced on both\ntypes."),(0,i.kt)("p",null,"To enable SSL on uws, all you need to do is pass in the location to a key and cert."),(0,i.kt)("p",null,"You can either do this using an explicit path:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"key: /location/to/ssl/key.pem\n")),(0,i.kt)("p",null,"or relative to the config file (less likely on a production install):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"key: file(relative/to/config/ssl/key.pem)\n")),(0,i.kt)("h3",{id:"how-to-configure"},"How to configure:"),(0,i.kt)(s.ZP,{mdxType:"UwsHttpServerConfig"}))}f.isMDXComponent=!0},6125:function(e,t,n){n.d(t,{ZP:function(){return l}});var r=n(7462),o=n(3366),i=(n(7294),n(3905)),s=["components"],a={toc:[]};function l(e){var t=e.components,n=(0,o.Z)(e,s);return(0,i.kt)("wrapper",(0,r.Z)({},a,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"httpServer:\n  type: uws\n  options:\n    # url path for http health-checks, GET requests to this path will return 200 if deepstream is alive\n    healthCheckPath: /health-check\n    # -- CORS --\n    # if disabled, only requests with an 'Origin' header matching one specified under 'origins'\n    # below will be permitted and the 'Access-Control-Allow-Credentials' response header will be\n    # enabled\n    allowAllOrigins: true\n    # a list of allowed origins\n    origins:\n      - 'https://example.com'\n    # maximum allowed size of a POST request body, in bytes, defaults to 1 MB\n    maxMessageSize: 1048576\n    # Maximum length of allowed backpressure per socket when publishing or sending messages.\n    # Slow receivers with too high backpressure will be skipped until they catch up or timeout. Defaults to 1024 * 1024.\n    maxBackpressure: 1024*1024\n    # Headers to copy over from websocket\n    headers:\n      - user-agent\n    # Options required to create an ssl app\n    ssl:\n      key: file(ssl/key.pem)\n      cert: file(ssl/cert.pem)\n    ##  dhParams: ...\n    ##  passphrase: ...\n")))}l.isMDXComponent=!0}}]);