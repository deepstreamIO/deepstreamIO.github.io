"use strict";(self.webpackChunkdeepstreamio_github_io=self.webpackChunkdeepstreamio_github_io||[]).push([[2675],{2653:(e,n,a)=>{a.r(n),a.d(n,{contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var r=a(8168),t=(a(6540),a(5680));const s={title:"User File",description:"The API on how you can configure and use file-based authentication"},o=void 0,i={unversionedId:"docs/server/user-file",id:"docs/server/user-file",title:"User File",description:"The API on how you can configure and use file-based authentication",source:"@site/docs/10-docs/10-server/40-user-file.md",sourceDirName:"10-docs/10-server",slug:"/docs/server/user-file",permalink:"/docs/docs/server/user-file",editUrl:"https://github.com/deepstreamIO/deepstreamIO.github.io/docs/10-docs/10-server/40-user-file.md",tags:[],version:"current",sidebarPosition:40,frontMatter:{title:"User File",description:"The API on how you can configure and use file-based authentication"},sidebar:"tutorialSidebar",previous:{title:"Node API",permalink:"/docs/docs/server/node-api"},next:{title:"Valve Permissions",permalink:"/docs/docs/server/valve-permissions"}},l=[{value:"password",id:"password",children:[],level:3},{value:"data",id:"data",children:[],level:3}],c={toc:l},p="wrapper";function d(e){let{components:n,...a}=e;return(0,t.yg)(p,(0,r.A)({},c,a,{components:n,mdxType:"MDXLayout"}),(0,t.yg)("p",null,"The API on how you can configure and use ",(0,t.yg)("a",{parentName:"p",href:"../../tutorials/core/auth/file"},"file-based authentication"),". The file is structured as a map of usernames and their associated passwords and optional auth data."),(0,t.yg)("p",null,"The userfile can be written in YAML or JSON."),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"# Username as key\njohndoe:\n  # Password as hash if auth.options.has is configured or in cleartext\n  password: uY2zMQZXcFuWKeX/6eY43w==9wSp046KHAQfbvKcKgvwNA==\n  # Optional auth data that will be passed to permissioning as user.data\n  clientData:\n    favoriteDessert: brownies\n  serverData:\n    role: admin\n\nsamjones:\n  password: 7KZrUQcnFUDNOQtqtKqhCA==ElDieSHdI2vtiws41JF/HQ==\n  clientData:\n    favoriteDessert: shortbread\n  serverData:\n    role: user\n")),(0,t.yg)("p",null,"or in JSON"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "johndoe": {\n        "password": "uY2zMQZXcFuWKeX/6eY43w==9wSp046KHAQfbvKcKgvwNA==",\n        "clientData": { "favoriteColor": "yellow" },\n        "serverData": { "role": "admin" }\n    },\n    "samjones": {\n        "password": "7KZrUQcnFUDNOQtqtKqhCA==ElDieSHdI2vtiws41JF/HQ==",\n        "clientData": { "favoriteColor": "violet" },\n        "serverData": { "role": "user" }\n    }\n}\n')),(0,t.yg)("h3",{id:"password"},"password"),(0,t.yg)("p",null,"Can either be the user's plaintext password or a hash of the password"),(0,t.yg)("p",null,"If you've configured file-based authentication as follows, use plaintext passwords:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"   type: file\n   options:\n     users: fileLoad(users.yml)\n     hash: false\n")),(0,t.yg)("p",null,"If you've configured a hashing algorithm, use hashes as password:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"   type: file\n   options:\n     users: fileLoad(users.yml)\n     hash: 'md5'\n     iterations: 50\n     keyLength: 16\n\n")),(0,t.yg)("div",{className:"admonition admonition-info alert alert--info"},(0,t.yg)("div",{parentName:"div",className:"admonition-heading"},(0,t.yg)("h5",{parentName:"div"},(0,t.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,t.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,t.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,t.yg)("div",{parentName:"div",className:"admonition-content"},(0,t.yg)("p",{parentName:"div"},"You can create hashes from passwords with the currently specified settings using deepstream's command line interface"),(0,t.yg)("pre",{parentName:"div"},(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"deepstream hash <password>\n")))),(0,t.yg)("h3",{id:"data"},"data"),(0,t.yg)("p",null,"Optional authentication data, e.g. ",(0,t.yg)("inlineCode",{parentName:"p"},"role: admin")," or ",(0,t.yg)("inlineCode",{parentName:"p"},"canCreatePosts: true"),". This data will be available in your permission rules as ",(0,t.yg)("inlineCode",{parentName:"p"},"user.data"),". Data stored within clientData will also be forwarded to the client as part of the login process."),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "samjones": {\n        "password": "7KZrUQcnFUDNOQtqtKqhCA==ElDieSHdI2vtiws41JF/HQ==",\n        "clientData": { "user-alias": "sammy" },\n        "serverData": { "role": "user" }\n        }\n    }\n}\n')))}d.isMDXComponent=!0},5680:(e,n,a)=>{a.d(n,{xA:()=>p,yg:()=>g});var r=a(6540);function t(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function s(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?s(Object(a),!0).forEach((function(n){t(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function i(e,n){if(null==e)return{};var a,r,t=function(e,n){if(null==e)return{};var a,r,t={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var l=r.createContext({}),c=function(e){var n=r.useContext(l),a=n;return e&&(a="function"==typeof e?e(n):o(o({},n),e)),a},p=function(e){var n=c(e.components);return r.createElement(l.Provider,{value:n},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var a=e.components,t=e.mdxType,s=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(a),m=t,g=d["".concat(l,".").concat(m)]||d[m]||u[m]||s;return a?r.createElement(g,o(o({ref:n},p),{},{components:a})):r.createElement(g,o({ref:n},p))}));function g(e,n){var a=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var s=a.length,o=new Array(s);o[0]=m;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i[d]="string"==typeof e?e:t,o[1]=i;for(var c=2;c<s;c++)o[c]=a[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"}}]);