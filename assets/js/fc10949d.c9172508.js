"use strict";(self.webpackChunkdeepstreamio_github_io=self.webpackChunkdeepstreamio_github_io||[]).push([[5429],{4092:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var a=n(8168),r=(n(6540),n(5680));const i={title:"Realtime ToDo List",description:"Learn how to create a realtime ToDo list using deepstream technology",tags:["Javascript","React","lists","records"],navLabel:"Realtime Todo List"},o=void 0,s={unversionedId:"guides/example-apps/realtime-todo-list",id:"guides/example-apps/realtime-todo-list",title:"Realtime ToDo List",description:"Learn how to create a realtime ToDo list using deepstream technology",source:"@site/docs/20-guides/example-apps/realtime-todo-list.md",sourceDirName:"20-guides/example-apps",slug:"/guides/example-apps/realtime-todo-list",permalink:"/docs/guides/example-apps/realtime-todo-list",editUrl:"https://github.com/deepstreamIO/deepstreamIO.github.io/docs/20-guides/example-apps/realtime-todo-list.md",tags:[{label:"Javascript",permalink:"/docs/tags/javascript"},{label:"React",permalink:"/docs/tags/react"},{label:"lists",permalink:"/docs/tags/lists"},{label:"records",permalink:"/docs/tags/records"}],version:"current",frontMatter:{title:"Realtime ToDo List",description:"Learn how to create a realtime ToDo list using deepstream technology",tags:["Javascript","React","lists","records"],navLabel:"Realtime Todo List"},sidebar:"tutorialSidebar",previous:{title:"Realtime friend locator",permalink:"/docs/guides/example-apps/realtime-friend-locator"},next:{title:"Live Progress Bar",permalink:"/docs/guides/live-progress-bar/intro"}},l=[{value:"Connect to deepstream and log in",id:"connect-to-deepstream-and-log-in",children:[],level:2},{value:"Getting the list and subscribing for updates",id:"getting-the-list-and-subscribing-for-updates",children:[],level:2},{value:"Adding/removing/updating ToDo items",id:"addingremovingupdating-todo-items",children:[],level:2}],d={toc:l},c="wrapper";function p(e){let{components:t,...i}=e;return(0,r.yg)(c,(0,a.A)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"You probably know the ",(0,r.yg)("a",{parentName:"p",href:"http://todomvc.com/"},"TodoMVC")," project (if not, take a look). We believe that deepstream's lists and records can simplify the development and implementation of many kinds of project, ToDomvc and the like are good examples for that.\nThis tutorial will show you how to use deepstream's records and lists for building a realtime TodoList app with React.\nWe definitely recommend being familiar with ",(0,r.yg)("a",{parentName:"p",href:"../../tutorials/core/datasync/records/"},"Records")," and ",(0,r.yg)("a",{parentName:"p",href:"../../tutorials/core/datasync/lists/"},"Lists")," before giving this a go, and, of course, with the React framework."),(0,r.yg)("p",null,"This is how it looks like:"),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"todoMVC gif",src:n(4893).A})),(0,r.yg)("h2",{id:"connect-to-deepstream-and-log-in"},"Connect to deepstream and log in"),(0,r.yg)("p",null,"Include the JS-client library"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"embed: js/include-script.html")),(0,r.yg)("p",null,"Get your app url from the dashboard and establish a connection to deepstream"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"embed: js/create-client.js")),(0,r.yg)("p",null,"and log in (we didn't configure any authentication, so there are no credentials required)"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"ds.login();\n")),(0,r.yg)("h2",{id:"getting-the-list-and-subscribing-for-updates"},"Getting the list and subscribing for updates"),(0,r.yg)("p",null,"Include this in your main component's constructor/getInitialState section:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"    this.list = ds.record.getList( 'todos' );\n    this.list.subscribe(this._setEntries.bind( this ) );\n")),(0,r.yg)("p",null,"Then set the setEntries function that keeps listening to changes in the list (new entry, removed entry):"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"_setEntries( entries ) {\n    this.setState({\n      todos: entries\n    });\n  }\n")),(0,r.yg)("p",null,"This.state.todos is an array of record names (entries) retrieved from the list. Now, with this binding, each time a todo item is added or removed, the state of the component is automatically updated.\nEach todo item is rendered separately in a different component, being passed a recordName.\nEvery time the TodoItem component is initiated, it uses the recordName to get the details from the actual record. This is what should be included in the TodoItem's constructor/getInitialState section:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"this.record = ds.record.getRecord(this.props.recordName);\nthis.record.subscribe(this.setState.bind(this), true);\n")),(0,r.yg)("p",null,"In that way, first of all, all the data of the record is being retrieved, in this case - the title and the isDone, passed to the state of the component, and rendered. Then, each time there's an update in the record, for example the title is edited, the state of the element is automatically updated (after updating the record), and the component re-rendered."),(0,r.yg)("h2",{id:"addingremovingupdating-todo-items"},"Adding/removing/updating ToDo items"),(0,r.yg)("p",null,"Whenever a text is being entered in the input field, two things should happen - a record should be initiated, and the list should get a new entry. This is the function that's being called when a new Todo is in:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"addTodo() {\n    const id = 'todo/' + ds.getUid();\n    ds.record.getRecord(id).set({\n      title: this.state.newTodo,\n      isDone: false\n    });\n    this.list.addEntry( id );\n  }\n")),(0,r.yg)("p",null,"As you can see, first a unique id is being created, then a record is being created with the unique id name, the title from the input field, and a default 'isDone' property that is being set to 'false'. Also, an entry is being added to the list, which automatically sets the state, which makes the whole thing render again with the new record.\nWhen the delete button is being pressed, a function like this should be invoked:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"removeTodo() {\n  this.props.list.removeEntry( this.record.name );\n  this.record.delete();\n}\n")),(0,r.yg)("p",null,"To update a record, for example the title, use this:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"this.record.set('title', title);\n")),(0,r.yg)("p",null,'In case all the checkboxes are checked, and the "Clear Completed" button is being pressed, this how you would empty the whole list:'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"    list.setEntries([]);\n")),(0,r.yg)("p",null,"For the full code, please take a look at the GitHub  ",(0,r.yg)("a",{href:"https://github.com/deepstreamIO/deepstream.io-tutorial-todomvc"},"repository"),"."))}p.isMDXComponent=!0},4893:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/todoMVC-9e2545c9dba9debd620babc0d982d719.gif"},5680:(e,t,n)=>{n.d(t,{xA:()=>c,yg:()=>m});var a=n(6540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),d=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(n),g=r,m=p["".concat(l,".").concat(g)]||p[g]||u[g]||i;return n?a.createElement(m,o(o({ref:t},c),{},{components:n})):a.createElement(m,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=g;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,o[1]=s;for(var d=2;d<i;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"}}]);