"use strict";(self.webpackChunkdeepstreamio_github_io=self.webpackChunkdeepstreamio_github_io||[]).push([[3007],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),o=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},u=function(e){var t=o(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=o(n),m=a,b=d["".concat(s,".").concat(m)]||d[m]||p[m]||l;return n?r.createElement(b,c(c({ref:t},u),{},{components:n})):r.createElement(b,c({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,c=new Array(l);c[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,c[1]=i;for(var o=2;o<l;o++)c[o]=n[o];return r.createElement.apply(null,c)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7533:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return o},toc:function(){return u},default:function(){return d}});var r=n(7462),a=n(3366),l=(n(7294),n(3905)),c=["components"],i={title:"Presence",description:"API docs for deepstream's presence feature, allowing clients to know about other connected clients"},s=void 0,o={unversionedId:"docs/client-js/presence",id:"docs/client-js/presence",title:"Presence",description:"API docs for deepstream's presence feature, allowing clients to know about other connected clients",source:"@site/docs/10-docs/20-client-js/40-presence.md",sourceDirName:"10-docs/20-client-js",slug:"/docs/client-js/presence",permalink:"/docs/docs/client-js/presence",editUrl:"https://github.com/deepstreamIO/deepstreamIO.github.io/docs/10-docs/20-client-js/40-presence.md",tags:[],version:"current",sidebarPosition:40,frontMatter:{title:"Presence",description:"API docs for deepstream's presence feature, allowing clients to know about other connected clients"},sidebar:"tutorialSidebar",previous:{title:"Event",permalink:"/docs/docs/client-js/event"},next:{title:"RPC",permalink:"/docs/docs/client-js/reqres-client-rpc"}},u=[{value:"Methods",id:"methods",children:[{value:"client.presence.subscribe( username, callback )",id:"clientpresencesubscribe-username-callback-",children:[],level:3},{value:"client.presence.unsubscribe( username, callback )",id:"clientpresenceunsubscribe-username-callback-",children:[],level:3},{value:"client.presence.getAll( usernames, callback )",id:"clientpresencegetall-usernames-callback-",children:[],level:3}],level:2}],p={toc:u};function d(e){var t=e.components,n=(0,a.Z)(e,c);return(0,l.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Presence allows clients to know when other clients come online and offline, as well as the ability to query for connected clients."),(0,l.kt)("p",null,"It's worth mentioning that presence only shows clients that logged in with a username. For example, ",(0,l.kt)("inlineCode",{parentName:"p"},"client.login()")," won't trigger the callback ",(0,l.kt)("inlineCode",{parentName:"p"},"client.presence.subscribe(callback)"),"."),(0,l.kt)("h2",{id:"methods"},"Methods"),(0,l.kt)("h3",{id:"clientpresencesubscribe-username-callback-"},"client.presence.subscribe( username, callback )"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Argument"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Optional"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"username"),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null},"true"),(0,l.kt)("td",{parentName:"tr",align:null},"A username that should be subscribed to.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"callback"),(0,l.kt)("td",{parentName:"tr",align:null},"Function"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"Will be invoked with the username of a client, and a boolean to indicate if it was a login(true) or logout(false) event")))),(0,l.kt)("p",null,"Subscribes to presence events. Callback will receive the username of the newly logged in/out user"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"// Client A\nclient.presence.subscribe((username, isLoggedIn) => {\n  // handle every new user login/logout\n})\n\nclient.presence.subscribe('Alex', (username, isLoggedIn) => {\n  // handle Alex only\n})\n\n// Client B\nclient.login({username: 'Alex'})\n")),(0,l.kt)("h3",{id:"clientpresenceunsubscribe-username-callback-"},"client.presence.unsubscribe( username, callback )"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Argument"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Optional"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"username"),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null},"true"),(0,l.kt)("td",{parentName:"tr",align:null},"The username that was subscribed to.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"callback"),(0,l.kt)("td",{parentName:"tr",align:null},"Function"),(0,l.kt)("td",{parentName:"tr",align:null},"true"),(0,l.kt)("td",{parentName:"tr",align:null},"A previously registered named callback")))),(0,l.kt)("p",null,"Removes a previously registered presence callback. If no callback is provided all presence subscriptions will be removed."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"function onOnlineStatusChange( username, isOnline ) {\n  //...\n}\n// Client A\nclient.presence.subscribe( onOnlineStatusChange )\n// unsubscribe callback\nclient.presence.unsubscribe( onOnlineStatusChange )\n\n// unsubscribe all presence callbacks for a previously subscribed username\nclient.presence.unsubscribe( 'username' )\n\n// unsubscribe all\nclient.presence.unsubscribe()\n")),(0,l.kt)("h3",{id:"clientpresencegetall-usernames-callback-"},"client.presence.getAll( usernames, callback )"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Argument"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Optional"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"usernames"),(0,l.kt)("td",{parentName:"tr",align:null},"Array"),(0,l.kt)("td",{parentName:"tr",align:null},"true"),(0,l.kt)("td",{parentName:"tr",align:null},"An array of specific usernames that should be queried.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"callback"),(0,l.kt)("td",{parentName:"tr",align:null},"Function"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"A function that will be called with an error value and an array or object of usernames that are online")))),(0,l.kt)("p",null,"Queries for currently connected clients"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"// Client B\nclient.presence.getAll((error, clients) => {\n    // error = null, clients = [ 'Alex', 'Ben', 'Charlie' ]\n})\n")),(0,l.kt)("p",null,"Query for specific users"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"// Client B\nclient.presence.getAll(['Alex', 'Pedro',], (error, clients) => {\n    // error = null, clients = {Alex: true, Pedro: false}\n})\n")))}d.isMDXComponent=!0}}]);